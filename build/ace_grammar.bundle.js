/**
*
*   classy.js
*   Object-Oriented mini-framework for JavaScript
*   @version: 0.4.1
*
*   https://github.com/foo123/classy.js
*
**/!function(e,t,r,n){r=r?[].concat(r):[];var o,l=r.length,a=new Array(l),i=new Array(l),c=new Array(l);for(o=0;l>o;o++)a[o]=r[o][0],i[o]=r[o][1];if("object"==typeof module&&module.exports){if("undefined"==typeof module.exports[t]){for(o=0;l>o;o++)c[o]=module.exports[a[o]]||require(i[o])[a[o]];module.exports[t]=n.apply(e,c)}}else if("function"==typeof define&&define.amd)define(["exports"].concat(i),function(r){if("undefined"==typeof r[t]){for(var o=Array.prototype.slice.call(arguments,1),l=0,i=o.length;i>l;l++)c[l]=r[a[l]];r[t]=n.apply(e,c)}});else if("undefined"==typeof e[t]){for(o=0;l>o;o++)c[o]=e[a[o]];e[t]=n.apply(e,c)}}(this,"Classy",null,function(){var e=Array.prototype.slice,t=(Array.prototype.splice,Array.prototype.concat,Object.prototype.toString),r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=Object.keys,l=Object.defineProperty,a=function(e){return"function"==typeof e},i=function(e,t){if("object"!=typeof e||null===e)throw new TypeError("bad desc");var n={};if(r.call(e,"enumerable")&&(n.enumerable=!!t.enumerable),r.call(e,"configurable")&&(n.configurable=!!t.configurable),r.call(e,"value")&&(n.value=t.value),r.call(e,"writable")&&(n.writable=!!e.writable),r.call(e,"get")){var o=e.get;if(!a(o)&&"undefined"!==o)throw new TypeError("bad get");n.get=o}if(r.call(e,"set")){var l=e.set;if(!a(l)&&"undefined"!==l)throw new TypeError("bad set");n.set=l}if(("get"in n||"set"in n)&&("value"in n||"writable"in n))throw new TypeError("identity-confused descriptor");return n},c=Object.defineProperties||function(e,t){if("object"!=typeof e||null===e)throw new TypeError("bad obj");t=Object(t);for(var r=o(t),n=[],a=0;a<r.length;a++)n.push([r[a],i(t[r[a]],e)]);for(var a=0;a<n.length;a++)l(e,n[a][0],n[a][1]);return e},u=Object.create||function(e,t){var r,n=function(){};return n.prototype=e,r=new n,r.__proto__=e,"object"==typeof t&&c(r,t),r},f=function(t,r){return r=r||0,function(n){if(n){for(var o=t,l=r;l&&o;)o=o.$super,l--;if(l)return;if(o){var a,i=this;if(n="constructor"==n?o:o.prototype[n])return r++,a=n.apply(i,e.call(arguments,1)),r--,a}}}},p=function(){var o,l,a,i,c,u,f,p,s=e.call(arguments);for(l=s.shift()||{},o=s.length,p=0;o>p;p++)if(a=s[p],a&&"object"==typeof a)for(f in a)r.call(a,f)&&n.call(a,f)&&(u=a[f],i=t.call(u),c=typeof u,l[f]="number"==c||u instanceof Number?0+u:u&&("[object Array]"==i||u instanceof Array||"string"==c||u instanceof String)?u.slice(0):u);return l},s=function(e,t){e=e||Object,t=t||{};var r=t.constructor?t.constructor:function(){};return r.prototype=u(e.prototype),r.prototype=p(r.prototype,t),c(r.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0},$class:{value:r,enumerable:!1,writable:!0,configurable:!0},$super:{value:f(e),enumerable:!1,writable:!0,configurable:!0}}),c(r,{$super:{value:e,enumerable:!1,writable:!0,configurable:!0},$static:{value:e.$static&&"object"==typeof e.$static?p(null,e.$static):null,enumerable:!1,writable:!0,configurable:!0}}),r},y=Mixin=p,b=function(){var t=e.call(arguments),r=t.length,n=null;if(r>=2){var o=typeof t[0];o="function"==o?{Extends:t[0]}:"object"==o?t[0]:{Extends:Object};var l,a,i=t[1]||{},c=t[2]||null,u={},f=o.Extends||o.extends||Object,b=o.Implements||o.implements,d=o.Mixin||o.mixin;if(b=b?[].concat(b):null,d=d?[].concat(d):null)for(l=0,a=d.length;a>l;l++)d[l].prototype&&(u=Mixin(u,d[l].prototype));if(b)for(l=0,a=b.length;a>l;l++)b[l].prototype&&(u=y(u,b[l].prototype));n=s(f,p(u,i)),c&&"object"==typeof c&&(n.$static=p(n.$static,c))}else n=s(Object,t[0]);return n};return{VERSION:"0.4.1",Class:b,Extends:s,Implements:y,Mixin:Mixin,Create:u,Merge:p}});/**
*
*   A simple Regular Expression Analyzer
*   @version 0.2.4
*   https://github.com/foo123/regex-analyzer
*
**/!function(t,e,r,a){r=r?[].concat(r):[];var p,s=r.length,h=new Array(s),n=new Array(s),i=new Array(s);for(p=0;s>p;p++)h[p]=r[p][0],n[p]=r[p][1];if("object"==typeof module&&module.exports){if("undefined"==typeof module.exports[e]){for(p=0;s>p;p++)i[p]=module.exports[h[p]]||require(n[p])[h[p]];module.exports[e]=a.apply(t,i)}}else if("function"==typeof define&&define.amd)define(["exports"].concat(n),function(r){if("undefined"==typeof r[e]){for(var p=Array.prototype.slice.call(arguments,1),s=0,n=p.length;n>s;s++)i[s]=r[h[s]];r[e]=a.apply(t,i)}});else if("undefined"==typeof t[e]){for(p=0;s>p;p++)i[p]=t[h[p]];t[e]=a.apply(t,i)}}(this,"RegExAnalyzer",null,function(){var t="\\",e=/^\{\s*(\d+)\s*,?\s*(\d+)?\s*\}/,r=/^u([0-9a-fA-F]{4})/,a=/^x([0-9a-fA-F]{2})/,p={".":"MatchAnyChar","|":"MatchEither","?":"MatchZeroOrOne","*":"MatchZeroOrMore","+":"MatchOneOrMore","^":"MatchStart",$:"MatchEnd","{":"StartRepeats","}":"EndRepeats","(":"StartGroup",")":"EndGroup","[":"StartCharGroup","]":"EndCharGroup"},s={"\\":"EscapeChar","/":"/",0:"NULChar",f:"FormFeed",n:"LineFeed",r:"CarriageReturn",t:"HorizontalTab",v:"VerticalTab",b:"MatchWordBoundary",B:"MatchNonWordBoundary",s:"MatchSpaceChar",S:"MatchNonSpaceChar",w:"MatchWordChar",W:"MatchNonWordChar",d:"MatchDigitChar",D:"MatchNonDigitChar"},h=Object.prototype.toString,n=function(t,e){if(e&&(e instanceof Array||"[object Array]"==h.call(e)))for(var r=0,a=e.length;a>r;r++)t[e[r]]=1;else for(var r in e)t[r]=1;return t},i=function(t,e){t&&(t instanceof Array||"[object Array]"==h.call(t))&&(e=t[1],t=t[0]);var r,a,p=t.charCodeAt(0),s=e.charCodeAt(0);if(s==p)return[String.fromCharCode(p)];for(a=[],r=p;s>=r;++r)a.push(String.fromCharCode(r));return a},g=function(t){var e,r,a,p,s,h,o={},l={};if("Alternation"==t.type)for(a=0,p=t.part.length;p>a;a++)s=g(t.part[a]),o=n(o,s.peek),l=n(l,s.negativepeek);else if("Group"==t.type)s=g(t.part),o=n(o,s.peek),l=n(l,s.negativepeek);else if("Sequence"==t.type){for(a=0,p=t.part.length,r=t.part[a],h=a>=p||!r||"Quantifier"!=r.type||!r.flags.MatchZeroOrMore&&!r.flags.MatchZeroOrOne&&"0"!=r.flags.MatchMinimum;!h;)s=g(r.part),o=n(o,s.peek),l=n(l,s.negativepeek),a++,r=t.part[a],h=a>=p||!r||"Quantifier"!=r.type||!r.flags.MatchZeroOrMore&&!r.flags.MatchZeroOrOne&&"0"!=r.flags.MatchMinimum;p>a&&(r=t.part[a],"Special"!=r.type||"^"!=r.part&&"$"!=r.part||(r=t.part[a+1]||null),r&&"Quantifier"==r.type&&(r=r.part),r&&(s=g(r),o=n(o,s.peek),l=n(l,s.negativepeek)))}else if("CharGroup"==t.type)for(e=t.flags.NotMatch?l:o,a=0,p=t.part.length;p>a;a++)r=t.part[a],"Chars"==r.type?e=n(e,r.part):"CharRange"==r.type?e=n(e,i(r.part)):"UnicodeChar"==r.type||"HexChar"==r.type?e[r.flags.Char]=1:"Special"==r.type&&("D"==r.part?t.flags.NotMatch?o["\\d"]=1:l["\\d"]=1:"W"==r.part?t.flags.NotMatch?o["\\w"]=1:l["\\W"]=1:"S"==r.part?t.flags.NotMatch?o["\\s"]=1:l["\\s"]=1:e["\\"+r.part]=1);else"String"==t.type?o[t.part.charAt(0)]=1:"Special"!=t.type||t.flags.MatchStart||t.flags.MatchEnd?("UnicodeChar"==t.type||"HexChar"==t.type)&&(o[t.flags.Char]=1):"D"==t.part?l["\\d"]=1:"W"==t.part?l["\\W"]=1:"S"==t.part?l["\\s"]=1:o["\\"+t.part]=1;return{peek:o,negativepeek:l}},o=function(t,e){t&&this.setRegex(t,e)};return o.VERSION="0.2.4",o.getCharRange=i,o.prototype={constructor:o,VERSION:o.VERSION,regex:null,groupIndex:null,pos:null,flags:null,parts:null,getCharRange:o.getCharRange,getPeekChars:function(){var t,e,r,a,s=this.flags&&this.flags.i,h=g(this.parts);for(t in h){a={},r=h[t];for(e in r)"\\d"==e?(delete r[e],a=n(a,i("0","9"))):"\\s"==e?(delete r[e],a=n(a,["\f","\n","\r","	","","Â ","\u2028","\u2029"])):"\\w"==e?(delete r[e],a=n(a,["_"].concat(i("0","9")).concat(i("a","z")).concat(i("A","Z")))):"\\."==e?(delete r[e],a[p["."]]=1):"\\"!=e.charAt(0)&&s?(a[e.toLowerCase()]=1,a[e.toUpperCase()]=1):"\\"==e.charAt(0)&&delete r[e];h[t]=n(r,a)}return h},setRegex:function(t,e){if(t){this.flags={},e=e||"/";for(var r=t.toString(),a=r.length,p=r.charAt(a-1);e!=p;)this.flags[p]=1,r=r.substr(0,a-1),a=r.length,p=r.charAt(a-1);e==r.charAt(0)&&e==r.charAt(a-1)&&(r=r.substr(1,a-2)),this.regex=r}return this},analyze:function(){var h,n,i,g="",o=[],l=[],u=!1;for(this.pos=0,this.groupIndex=0;this.pos<this.regex.length;)h=this.regex.charAt(this.pos++),u=t==h?!0:!1,u&&(h=this.regex.charAt(this.pos++)),u?"u"==h?(g.length&&(l.push({part:g,flags:{},type:"String"}),g=""),i=r.exec(this.regex.substr(this.pos-1)),this.pos+=i[0].length-1,l.push({part:i[0],flags:{Char:String.fromCharCode(parseInt(i[1],16)),Code:i[1]},type:"UnicodeChar"})):"x"==h?(g.length&&(l.push({part:g,flags:{},type:"String"}),g=""),i=a.exec(this.regex.substr(this.pos-1)),this.pos+=i[0].length-1,l.push({part:i[0],flags:{Char:String.fromCharCode(parseInt(i[1],16)),Code:i[1]},type:"HexChar"})):s[h]&&"/"!=h?(g.length&&(l.push({part:g,flags:{},type:"String"}),g=""),n={},n[s[h]]=1,l.push({part:h,flags:n,type:"Special"})):g+=h:"|"==h?(g.length&&(l.push({part:g,flags:{},type:"String"}),g=""),o.push({part:l,flags:{},type:"Sequence"}),l=[]):"["==h?(g.length&&(l.push({part:g,flags:{},type:"String"}),g=""),l.push(this.chargroup())):"("==h?(g.length&&(l.push({part:g,flags:{},type:"String"}),g=""),l.push(this.subgroup())):"{"==h?(g.length&&(l.push({part:g,flags:{},type:"String"}),g=""),i=e.exec(this.regex.substr(this.pos-1)),this.pos+=i[0].length-1,l.push({part:l.pop(),flags:{part:i[0],MatchMinimum:i[1],MatchMaximum:i[2]||"unlimited"},type:"Quantifier"})):"*"==h||"+"==h?(g.length&&(l.push({part:g,flags:{},type:"String"}),g=""),n={},n[p[h]]=1,"?"==this.regex.charAt(this.pos)?(n.isGreedy=0,this.pos++):n.isGreedy=1,l.push({part:l.pop(),flags:n,type:"Quantifier"})):"?"==h?(g.length&&(l.push({part:g,flags:{},type:"String"}),g=""),n={},n[p[h]]=1,l.push({part:l.pop(),flags:n,type:"Quantifier"})):p[h]?(g.length&&(l.push({part:g,flags:{},type:"String"}),g=""),n={},n[p[h]]=1,l.push({part:h,flags:n,type:"Special"})):g+=h;return g.length&&(l.push({part:g,flags:{},type:"String"}),g=""),o.length?(o.push({part:l,flags:{},type:"Sequence"}),l=[],n={},n[p["|"]]=1,this.parts={part:o,flags:n,type:"Alternation"}):this.parts={part:l,flags:{},type:"Sequence"},this},subgroup:function(){var h,n,i,g="",o=[],l=[],u={},f=!1,c=this.regex.substr(this.pos,2);for("?:"==c?(u.NotCaptured=1,this.pos+=2):"?="==c?(u.LookAhead=1,this.pos+=2):"?!"==c&&(u.NegativeLookAhead=1,this.pos+=2),u.GroupIndex=++this.groupIndex;this.pos<this.regex.length;)if(h=this.regex.charAt(this.pos++),f=t==h?!0:!1,f&&(h=this.regex.charAt(this.pos++)),f)"u"==h?(g.length&&(l.push({part:g,flags:{},type:"String"}),g=""),i=r.exec(this.regex.substr(this.pos-1)),this.pos+=i[0].length-1,l.push({part:i[0],flags:{Char:String.fromCharCode(parseInt(i[1],16)),Code:i[1]},type:"UnicodeChar"})):"x"==h?(g.length&&(l.push({part:g,flags:{},type:"String"}),g=""),i=a.exec(this.regex.substr(this.pos-1)),this.pos+=i[0].length-1,l.push({part:i[0],flags:{Char:String.fromCharCode(parseInt(i[1],16)),Code:i[1]},type:"HexChar"})):s[h]&&"/"!=h?(g.length&&(l.push({part:g,flags:{},type:"String"}),g=""),n={},n[s[h]]=1,l.push({part:h,flags:n,type:"Special"})):g+=h;else{if(")"==h)return g.length&&(l.push({part:g,flags:{},type:"String"}),g=""),o.length?(o.push({part:l,flags:{},type:"Sequence"}),l=[],n={},n[p["|"]]=1,{part:{part:o,flags:n,type:"Alternation"},flags:u,type:"Group"}):{part:{part:l,flags:{},type:"Sequence"},flags:u,type:"Group"};"|"==h?(g.length&&(l.push({part:g,flags:{},type:"String"}),g=""),o.push({part:l,flags:{},type:"Sequence"}),l=[]):"["==h?(g.length&&(l.push({part:g,flags:{},type:"String"}),g=""),l.push(this.chargroup())):"("==h?(g.length&&(l.push({part:g,flags:{},type:"String"}),g=""),l.push(this.subgroup())):"{"==h?(g.length&&(l.push({part:g,flags:{},type:"String"}),g=""),i=e.exec(this.regex.substr(this.pos-1)),this.pos+=i[0].length-1,l.push({part:l.pop(),flags:{part:i[0],MatchMinimum:i[1],MatchMaximum:i[2]||"unlimited"},type:"Quantifier"})):"*"==h||"+"==h?(g.length&&(l.push({part:g,flags:{},type:"String"}),g=""),n={},n[p[h]]=1,"?"==this.regex.charAt(this.pos)?(n.isGreedy=0,this.pos++):n.isGreedy=1,l.push({part:l.pop(),flags:n,type:"Quantifier"})):"?"==h?(g.length&&(l.push({part:g,flags:{},type:"String"}),g=""),n={},n[p[h]]=1,l.push({part:l.pop(),flags:n,type:"Quantifier"})):p[h]?(g.length&&(l.push({part:g,flags:{},type:"String"}),g=""),n={},n[p[h]]=1,l.push({part:h,flags:n,type:"Special"})):g+=h}return g.length&&(l.push({part:g,flags:{},type:"String"}),g=""),o.length?(o.push({part:l,flags:{},type:"Sequence"}),l=[],n={},n[p["|"]]=1,{part:{part:o,flags:n,type:"Alternation"},flags:u,type:"Group"}):{part:{part:l,flags:{},type:"Sequence"},flags:u,type:"Group"}},chargroup:function(){var e,p,h,n,i,g,o=[],l=[],u={},f=!1,c=!1;for("^"==this.regex.charAt(this.pos)&&(u.NotMatch=1,this.pos++);this.pos<this.regex.length;)if(g=!1,h=p,p=this.regex.charAt(this.pos++),c=t==p?!0:!1,c&&(p=this.regex.charAt(this.pos++)),c&&("u"==p?(i=r.exec(this.regex.substr(this.pos-1)),this.pos+=i[0].length-1,p=String.fromCharCode(parseInt(i[1],16)),g=!0):"x"==p&&(i=a.exec(this.regex.substr(this.pos-1)),this.pos+=i[0].length-1,p=String.fromCharCode(parseInt(i[1],16)),g=!0)),f)l.length&&(o.push({part:l,flags:{},type:"Chars"}),l=[]),n[1]=p,f=!1,o.push({part:n,flags:{},type:"CharRange"});else if(c)!g&&s[p]&&"/"!=p?(l.length&&(o.push({part:l,flags:{},type:"Chars"}),l=[]),e={},e[s[p]]=1,o.push({part:p,flags:e,type:"Special"})):l.push(p);else{if("]"==p)return l.length&&(o.push({part:l,flags:{},type:"Chars"}),l=[]),{part:o,flags:u,type:"CharGroup"};"-"==p?(n=[h,""],l.pop(),f=!0):l.push(p)}return l.length&&(o.push({part:l,flags:{},type:"Chars"}),l=[]),{part:o,flags:u,type:"CharGroup"}}},o});/**
*
*   AceGrammar
*   @version: 0.5
*   Transform a grammar specification in JSON format,
*   into an ACE syntax-highlight parser mode
*
*   https://github.com/foo123/ace-grammar
*
**/!function(t,e,n,s){n=n?[].concat(n):[];var r,i=n.length,o=new Array(i),u=new Array(i),h=new Array(i);for(r=0;i>r;r++)o[r]=n[r][0],u[r]=n[r][1];if("object"==typeof module&&module.exports){if("undefined"==typeof module.exports[e]){for(r=0;i>r;r++)h[r]=module.exports[o[r]]||require(u[r])[o[r]];module.exports[e]=s.apply(t,h)}}else if("function"==typeof define&&define.amd)define(["exports"].concat(u),function(n){if("undefined"==typeof n[e]){for(var r=Array.prototype.slice.call(arguments,1),i=0,u=r.length;u>i;i++)h[i]=n[o[i]];n[e]=s.apply(t,h)}});else if("undefined"==typeof t[e]){for(r=0;i>r;r++)h[r]=t[o[r]];t[e]=s.apply(t,h)}}(this,"AceGrammar",[["Classy","./classy"],["RegExAnalyzer","./regexanalyzer"]],function(t,e){var n,s,r,o=t.Class,u=2,h=4,c=8,a=9,f=10,p=16,g=32,k=64,m=128,d=256,v=512,R=2,y=4,w=8,E=4,C=8,b=16,x=32,O=33,L=34,P=64,_=128,B=256,A=512,S=1024,q=2048,T=4096,I={ONEOF:P,EITHER:P,ALL:_,ZEROORONE:B,ZEROORMORE:A,ONEORMORE:S},j={BLOCK:x,COMMENT:L,ESCAPEDBLOCK:O,SIMPLE:b,GROUP:q,NGRAM:T},K={RegExpID:null,Style:null,Lex:null,Syntax:null,Parser:null},M=Array.prototype.slice,N=(Array.prototype.splice,Array.prototype.concat),$=Object.prototype.hasOwnProperty,D=Object.prototype.toString,z=Object.prototype.propertyIsEnumerable,F=Object.keys,U=function(t){var e=typeof t,n=D.call(t);return"undefined"==e?d:"number"==e||t instanceof Number?u:null===t?m:!0===t||!1===t?h:t&&("string"==e||t instanceof String)?1==t.length?a:c:t&&("[object RegExp]"==n||t instanceof RegExp)?p:t&&("[object Array]"==n||t instanceof Array)?g:t&&"[object Object]"==n?k:v},G=function(t,e){return e||g!=U(t)?[t]:t},Z=function(t,e){return t=G(t,e),(e||g!=U(t[0]))&&(t=[t]),t},H=function(t){var e,n=U(t);if(!((k|g)&n))return t;var s,r={};for(s in t)$.call(t,s)&&z.call(t,s)&&(e=U(t[s]),r[s]=k&e?H(t[s]):g&e?t[s].slice():t[s]);return r},V=function(){var t=M.call(arguments),e=t.length;if(1>e)return null;if(2>e)return H(t[0]);var n,s,r,i,o=t.shift(),u=H(o);for(e--,s=0;e>s;s++)if(n=t.shift())for(r in n)$.call(n,r)&&z.call(n,r)&&($.call(o,r)&&z.call(o,r)?(i=U(o[r]),k&~c&i&&(u[r]=V(o[r],n[r]))):u[r]=H(n[r]));return u},J=function(t){return t.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},Q=function(t,e){return e.length-t.length},W=function(t,e){return c&U(e)&&c&U(t)&&e.length&&e.length<=t.length&&e==t.substr(0,e.length)},X=function(t,n,s){if(!t||u==U(t))return t;var r=n?n.length||0:0;if(r&&n==t.substr(0,r)){var i,o,h,l="^("+t.substr(r)+")";return s[l]||(i=new RegExp(l),h=new e(i).analyze(),o=h.getPeekChars(),F(o.peek).length||(o.peek=null),F(o.negativepeek).length||(o.negativepeek=null),s[l]=[i,o]),s[l]}return t},Y=function(t,e){var n={},s="",r=U(e);(c==r||a==r)&&(s=e);var i=t.sort(Q).map(function(t){return n[t.charAt(0)]=1,J(t)}).join("|");return[new RegExp("^("+i+")"+s),{peek:n,negativepeek:null},1]},te=o({constructor:function(t){this.string=t?""+t:"",this.start=this.pos=0,this._=null},_:null,string:"",start:0,pos:0,fromStream:function(t){return this._=t,this.string=""+t.string,this.start=t.start,this.pos=t.pos,this},toString:function(){return this.string},sol:function(){return 0==this.pos},eol:function(){return this.pos>=this.string.length},chr:function(t,e){var n=this.string.charAt(this.pos)||null;return n&&t==n?(!1!==e&&(this.pos+=1,this._&&(this._.pos=this.pos)),n):!1},chl:function(t,e){var n=this.string.charAt(this.pos)||null;return n&&-1<t.indexOf(n)?(!1!==e&&(this.pos+=1,this._&&(this._.pos=this.pos)),n):!1},str:function(t,e,n){var s=this.pos,r=this.string,i=r.charAt(s)||null;if(i&&e[i]){var o=t.length,u=r.substr(s,o);if(t==u)return!1!==n&&(this.pos+=o,this._&&(this._.pos=this.pos)),u}return!1},rex:function(t,e,n,s,r){var i=this.pos,o=this.string,u=o.charAt(i)||null;if(u&&e&&e[u]||n&&!n[u]){var h=o.slice(i).match(t);return!h||h.index>0?!1:(!1!==r&&(this.pos+=h[s||0].length,this._&&(this._.pos=this.pos)),h)}return!1},end:function(){return this.pos=this.string.length,this._&&(this._.pos=this.pos),this},nxt:function(){if(this.pos<this.string.length){var t=this.string.charAt(this.pos++)||null;return this._&&(this._.pos=this.pos),t}},bck:function(t){return this.pos-=t,0>this.pos&&(this.pos=0),this._&&(this._.pos=this.pos),this},bck2:function(t){return this.pos=t,0>this.pos&&(this.pos=0),this._&&(this._.pos=this.pos),this},spc:function(){for(var t=this.pos,e=this.pos,n=this.string;/[\s\u00a0]/.test(n.charAt(e));)++e;return this.pos=e,this._&&(this._.pos=this.pos),this.pos>t},cur:function(){return this.string.slice(this.start,this.pos)},sft:function(){return this.start=this.pos,this}}),ee=o({constructor:function(t){this.id=t||0,this.stack=[],this.t=C,this.inBlock=null,this.endBlock=null},id:0,stack:null,t:null,inBlock:null,endBlock:null,clone:function(){var t=new this.$class(this.id);return t.t=this.t,t.stack=this.stack.slice(),t.inBlock=this.inBlock,t.endBlock=this.endBlock,t},toString:function(){return["",this.id,this.t,this.inBlock||"0"].join("_")}}),ne=o({constructor:function(t,e,n,s){switch(this.type=R,this.tt=t||a,this.tn=e,this.tk=s||0,this.tg=0,this.tp=null,this.p=null,this.np=null,this.tt){case a:case f:this.tp=n;break;case c:this.tp=n,this.p={},this.p[""+n.charAt(0)]=1;break;case p:this.tp=n[0],this.p=n[1].peek||null,this.np=n[1].negativepeek||null,this.tg=n[2]||0;break;case m:this.tp=null}},type:null,tt:null,tn:null,tp:null,tg:0,tk:0,p:null,np:null,get:function(t,e){var n,s=this.tt,r=this.tk,i=this.tp,o=this.tg,u=this.p,h=this.np;switch(s){case a:if(n=t.chr(i,e))return[r,n];break;case f:if(n=t.chl(i,e))return[r,n];break;case c:if(n=t.str(i,u,e))return[r,n];break;case p:if(n=t.rex(i,u,h,o,e))return[r,n];break;case m:return!1!==e&&t.end(),[r,""]}return!1},toString:function(){return["[","Matcher: ",this.tn,", Pattern: ",this.tp?this.tp.toString():null,"]"].join("")}}),se=o(ne,{constructor:function(t,e,n){this.type=y,this.tn=t,this.ms=e,this.ownKey=!1!==n},ms:null,ownKey:!0,get:function(t,e){var n,s,r=this.ms,i=r.length,o=this.ownKey;for(n=0;i>n;n++)if(s=r[n].get(t,e))return o?[n,s[1]]:s;return!1}}),re=o(ne,{constructor:function(t,e,n){this.type=w,this.tn=t,this.s=new se(this.tn+"_Start",e,!1),this.e=n},s:null,e:null,get:function(t,e){var n,s=this.s,r=this.e;if(n=s.get(t,e)){var i=r[n[0]];return u==U(i)&&(i=new ne(c,this.tn+"_End",n[1][i+1])),i}return!1}}),ie=function(t,e,n,s){var r=U(e);if(u==r)return e;if(!s[t]){n=n||0;var i,o=0;e&&e.isCharList&&(o=1,delete e.isCharList),i=m&r?new ne(m,t,e,n):a==r?new ne(a,t,e,n):c&r?o?new ne(f,t,e,n):new ne(c,t,e,n):g&r?new ne(p,t,e,n):e,s[t]=i}return s[t]},oe=function(t,e,n,s,r,i){if(!i[t]){var o,u,h,l,f,p,k,m=0,d=0,v=1;if(o=G(e),h=o.length,1==h)k=ie(t,X(o[0],n,r),0,i);else if(h>1){for(l=(h>>1)+1,u=0;l>=u;u++)f=U(o[u]),p=U(o[h-1-u]),(a!=f||a!=p)&&(v=0),g&f||g&p?m=1:(W(o[u],n)||W(o[h-1-u],n))&&(d=1);if(!v||s&&c&U(s))if(!s||m||d){for(u=0;h>u;u++)o[u]=g&U(o[u])?oe(t+"_"+u,o[u],n,s,r,i):ie(t+"_"+u,X(o[u],n,r),u,i);k=h>1?new se(t,o):o[0]}else k=ie(t,Y(o,s),0,i);else o=o.slice().join(""),o.isCharList=1,k=ie(t,o,0,i)}i[t]=k}return i[t]},ue=function(t,e,n,s,r){if(!r[t]){var i,o,u,h,l,c,a;for(h=[],l=[],i=Z(e),o=0,u=i.length;u>o;o++)c=ie(t+"_0_"+o,X(i[o][0],n,s),o,r),a=i[o].length>1?ie(t+"_1_"+o,X(i[o][1],n,s),o,r):c,h.push(c),l.push(a);r[t]=new re(t,h,l)}return r[t]},he=o({constructor:function(t,e,n){this.tt=b,this.tn=t,this.t=e,this.r=n,this.required=0,this.ERR=0,this.toClone=["t","r"]},tn:null,tt:null,t:null,r:null,required:0,ERR:0,streamPos:null,stackPos:null,toClone:null,actionBefore:null,actionAfter:null,get:function(t,e){return this.t.get(t)?(e.t=this.tt,this.r):!1},require:function(t){return this.required=t?1:0,this},push:function(t,e,n){return this.stackPos?t.splice(this.stackPos+(n||0),0,e):t.push(e),this},clone:function(){var t,e,n=this.toClone;if(t=new this.$class,t.tt=this.tt,t.tn=this.tn,t.streamPos=this.streamPos,t.stackPos=this.stackPos,t.actionBefore=this.actionBefore,t.actionAfter=this.actionAfter,n&&n.length){e=n.length;for(var s=0;e>s;s++)t[n[s]]=this[n[s]]}return t},toString:function(){return["[","Tokenizer: ",this.tn,", Matcher: ",this.t?this.t.toString():null,"]"].join("")}}),le=o(he,{constructor:function(t,e,n,s,r,i){this.$super("constructor",e,n,s),this.tt=t,this.mline=d&U(r)?1:r,this.esc=i||"\\",this.toClone=["t","r","mline","esc"]},mline:0,esc:null,get:function(t,e){var n,s,r=0,i=0,o="",u=this.mline,h=this.t,l=this.tn,c=0,a=O==this.tt,f=this.esc;if(e.inBlock==l?(i=1,n=e.endBlock):!e.inBlock&&(n=h.get(t))&&(i=1,e.inBlock=l,e.endBlock=n),i){for(this.stackPos=e.stack.length,r=n.get(t),s=u;!r&&!t.eol();){if(!(a&&c||!n.get(t))){r=1;break}o=t.nxt(),c=!c&&o==f}return s=u&&(!a||c),r||!s?(e.inBlock=null,e.endBlock=null):this.push(e.stack,this),e.t=this.tt,this.r}return e.inBlock=null,e.endBlock=null,!1}}),ce=o(he,{constructor:function(t,e){this.tt=B,this.tn=t||null,this.t=null,this.ts=null,this.foundOne=0,this.toClone=["ts","foundOne"],e&&this.makeToks(e)},ts:null,foundOne:0,makeToks:function(t){return t&&(this.ts=G(t)),this},get:function(t,e){var n,s,r,i=this.ts,o=i.length,u=0;if(this.ERR=this.foundOne,this.ERR)return!1;for(this.required=0,this.streamPos=t.pos,this.stackPos=e.stack.length,n=0;o>n;n++){if(s=i[n],r=s.get(t,e),!1!==r)return this.foundOne=1,this.push(e.stack,this.clone()),this.foundOne=0,r;s.ERR&&(u++,t.bck2(this.streamPos))}return!1}}),ae=o(ce,{constructor:function(t,e){this.$super("constructor",t,e),this.tt=A},get:function(t,e){var n,s,r,i=this.ts,o=i.length,u=0;for(this.required=0,this.ERR=0,this.streamPos=t.pos,this.stackPos=e.stack.length,n=0;o>n;n++){if(s=i[n],r=s.get(t,e),!1!==r)return this.push(e.stack,this),r;s.ERR&&(u++,t.bck2(this.streamPos))}return!1}}),fe=o(ce,{constructor:function(t,e){this.$super("constructor",t,e),this.tt=S,this.foundOne=0},get:function(t,e){var n,s,r,i=this.ts,o=i.length,u=0,h=0;for(this.required=!this.foundOne,this.ERR=0,this.streamPos=t.pos,this.stackPos=e.stack.length,r=0;o>r;r++){if(s=i[r],n=s.get(t,e),u+=s.required?1:0,!1!==n)return this.foundOne=1,this.required=0,this.ERR=0,this.push(e.stack,this.clone()),this.foundOne=0,n;s.ERR&&(h++,t.bck2(this.streamPos))}return this.ERR=this.foundOne?0:1,!1}}),pe=o(ce,{constructor:function(t,e){this.$super("constructor",t,e),this.tt=P},get:function(t,e){var n,s,r,i=this.ts,o=i.length,u=0,h=0;for(this.required=1,this.ERR=0,this.streamPos=t.pos,r=0;o>r;r++){if(s=i[r],n=s.get(t,e),u+=s.required?1:0,!1!==n)return n;s.ERR&&(h++,t.bck2(this.streamPos))}return this.required=u>0?1:0,this.ERR=o==h&&u>0?1:0,!1}}),ge=o(ce,{constructor:function(t,e){this.$super("constructor",t,e),this.tt=_},get:function(t,e){var n,s,r=this.ts,i=r.length,o=!1;if(this.required=1,this.ERR=0,this.streamPos=t.pos,this.stackPos=e.stack.length,n=r[0],s=n.require(0).get(t,e),!1!==s){this.stackPos=e.stack.length;for(var u=i-1;u>0;u--)this.push(e.stack,r[u].require(1),i-u);o=s}else n.ERR?(this.ERR=1,t.bck2(this.streamPos)):n.required&&(this.ERR=1);return o}}),ke=o(ce,{constructor:function(t,e){this.$super("constructor",t,e),this.tt=T},get:function(t,e){var n,s,r=this.ts,i=r.length,o=!1;if(this.required=0,this.ERR=0,this.streamPos=t.pos,this.stackPos=e.stack.length,n=r[0],s=n.require(0).get(t,e),!1!==s){this.stackPos=e.stack.length;for(var u=i-1;u>0;u--)this.push(e.stack,r[u].require(1),i-u);o=s}else n.ERR&&t.bck2(this.streamPos);return o}}),me=function(t,e,s,r,i,o,u,h,l,a){if(!h[t]){var f,p,k,m,d,v,R,y=null;if(f=s[t]||r[t]||null)if(R=U(f),(c|g)&R&&(f={type:"simple",tokens:f}),p=f.type?j[f.type.toUpperCase().replace("-","").replace("_","")]:b,f.tokens=G(f.tokens),m=f.action||null,b&p)f.autocomplete&&ve(f,t,a),k="undefined"==typeof f.combine?"\\b":f.combine,y=new he(t,oe(t,f.tokens.slice(),e,k,o,u),i[t]||n);else if(x&p)L&p&&de(f,l),y=new le(p,t,ue(t,f.tokens.slice(),e,o,u),i[t]||n,f.multiline,f.escape);else if(q&p){d=I[f.match.toUpperCase()],v=f.tokens.slice();for(var w=0,E=v.length;E>w;w++)v[w]=me(v[w],e,s,r,i,o,u,h,l,a);y=B&d?new ce(t,v):A&d?new ae(t,v):S&d?new fe(t,v):P&d?new pe(t,v):new ge(t,v)}else if(T&p){y=Z(f.tokens.slice()).slice();for(var w=0,E=y.length;E>w;w++){for(var C=y[w],O=0,_=C.length;_>O;O++)C[O]=me(C[O],e,s,r,i,o,u,h,l,a);y[w]=new ke(t+"_NGRAM_"+w,C)}}h[t]=y}return h[t]},de=function(t,e){var n,s,r,o=Z(t.tokens.slice());for(i=0,l=o.length;l>i;i++)n=o[i][0],s=o[i].length>1?o[i][1]:o[i][0],r=o[i].length>2?o[i][2]:"",null===s?(e.line=e.line||[],e.line.push(n)):(e.block=e.block||[],e.block.push([n,s,r]))},ve=function(t,e,n){var s=[].concat(G(t.tokens)).map(function(t){return{word:t,meta:e}});n.autocomplete=N.apply(n.autocomplete||[],s)},Re=function(t){var e,n,s,r,i,o,u,h,l,c,a,f,p,k,m;if(t.__parsed)return t;for(a={},f={},p={},k={},m={},t=V(t,K),e=t.RegExpID||null,t.RegExpID=null,delete t.RegExpID,o=t.Lex||{},t.Lex=null,delete t.Lex,u=t.Syntax||{},t.Syntax=null,delete t.Syntax,i=t.Style||{},r=t.Parser||[],s=r.length,n=[],h=0;s>h;h++)l=r[h],c=me(l,e,o,u,i,a,f,p,k,m)||null,c&&(g&U(c)?n=n.concat(c):n.push(c));return t.Parser=n,t.Style=i,t.Comments=k,t.Keywords=m,t.__parsed=1,t},ye=ace||{};r=ye.require||function(){return{}};var we=r("ace/range").Range||Object,Ee=(r("ace/mode/behaviour").Behaviour||null,r("ace/tokenizer").Tokenizer||Object),Ce=r("ace/token_iterator").TokenIterator||Object,be=o(Ee,{constructor:function(t,e){if(this.LC=t.Comments&&t.Comments.line?t.Comments.line:null,this.BC=t.Comments&&t.Comments.block?{start:t.Comments.block[0][0],end:t.Comments.block[0][1]}:null,this.LC){if(g&U(this.LC))var n=this.LC.map(J).join("|");else var n=J(this.LC);this.rxLine=new RegExp("^(\\s*)(?:"+n+") ?")}this.BC&&(this.rxStart=new RegExp("^(\\s*)(?:"+J(this.BC.start)+")"),this.rxEnd=new RegExp("(?:"+J(this.BC.end)+")\\s*$")),this.DEF=e.DEFAULT,this.ERR=t.Style&&t.Style.error?t.Style.error:e.ERROR,this.Keywords=t.Keywords&&t.Keywords.autocomplete?t.Keywords.autocomplete:null,this.Tokens=t.Parser||[]},ERR:null,DEF:null,LC:null,BC:null,rxLine:null,rxStart:null,rxEnd:null,Keywords:null,Tokens:null,getLineTokens:function(t,e,n){var s,r,i,o,u,h,l,c,a=this.Tokens,f=a.length,p=this.DEF,g=this.ERR;for(o=[],l=new te(t),e=e?e.clone():new ee,e.id=1+n,c=e.stack,u={type:null,value:""},h=null;!l.eol();)if(r=!1,h&&h!==u.type?(u.type&&o.push(u),u={type:h,value:l.cur()},l.sft()):u.type&&(u.value+=l.cur(),l.sft()),l.spc())e.t=C,h=p;else{for(;c.length&&!l.eol();){if(i=c.pop(),h=i.get(l,e),!1!==h){r=!0;break}if(i.ERR||i.required){c.length=0,l.nxt(),e.t=E,h=g,r=!0;break}}if(!r){if(l.eol())break;for(s=0;f>s;s++){if(i=a[s],h=i.get(l,e),!1!==h){r=!0;break}if(i.ERR||i.required){c.length=0,l.nxt(),e.t=E,h=g,r=!0;break}}if(!r){if(l.eol())break;l.nxt(),e.t=C,h=p}}}return h&&h!==u.type?(u.type&&o.push(u),o.push({type:h,value:l.cur()})):u.type&&(u.value+=l.cur(),o.push(u)),u=null,{state:e,tokens:o}},tCL:function(t,e,n,s){function r(t){for(var e=n;s>=e;e++)t(i.getLine(e),e)}var i=e.doc,o=!0,u=!0,h=1/0,l=e.getTabSize(),c=!1;if(this.LC){var a=g==U(this.LC)?this.LC[0]:this.LC,f=this.rxLine,p=a+" ";c=e.getUseSoftTabs();var k=function(t,e){var n=t.match(f);if(n){var s=n[1].length,r=n[0].length;v(t,s,r)||" "!=n[0][r-1]||r--,i.removeInLine(e,s,r)}},m=function(t,e){(!o||/\S/.test(t))&&(v(t,h,h)?i.insertInLine({row:e,column:h},p):i.insertInLine({row:e,column:h},a))},d=function(t){return f.test(t)},v=function(t,e,n){for(var s=0;e--&&" "==t.charAt(e);)s++;if(0!=s%l)return!1;for(var s=0;" "==t.charAt(n++);)s++;return l>2?s%l!=l-1:0==s%l}}else{if(!this.BC)return!1;var a=this.BC.start,R=this.BC.end,y=this.rxStart,w=this.rxEnd,m=function(t,e){d(t,e)||(!o||/\S/.test(t))&&(i.insertInLine({row:e,column:t.length},R),i.insertInLine({row:e,column:h},a))},k=function(t,e){var n;(n=t.match(w))&&i.removeInLine(e,t.length-n[0].length,t.length),(n=t.match(y))&&i.removeInLine(e,n[1].length,n[0].length)},d=function(t,n){if(y.test(t))return!0;for(var s=e.getTokens(n),r=0;r<s.length;r++)if("comment"===s[r].type)return!0}}var E=1/0;r(function(t,e){var n=t.search(/\S/);-1!==n?(h>n&&(h=n),u&&!d(t,e)&&(u=!1)):E>t.length&&(E=t.length)}),1/0==h&&(h=E,o=!1,u=!1),c&&0!=h%l&&(h=Math.floor(h/l)*l),r(u?k:m)},tBC:function(t,e,n,s){var r=this.BC;if(r){var i=new Ce(e,s.row,s.column),o=i.getCurrentToken();e.selection;var u,h,l=e.selection.toOrientedRange();if(o&&/comment/.test(o.type)){for(var c,a;o&&/comment/.test(o.type);){var f=o.value.indexOf(r.start);if(-1!=f){var p=i.getCurrentTokenRow(),g=i.getCurrentTokenColumn()+f;c=new we(p,g,p,g+r.start.length);break}o=i.stepBackward()}for(var i=new Ce(e,s.row,s.column),o=i.getCurrentToken();o&&/comment/.test(o.type);){var f=o.value.indexOf(r.end);if(-1!=f){var p=i.getCurrentTokenRow(),g=i.getCurrentTokenColumn()+f;a=new we(p,g,p,g+r.end.length);break}o=i.stepForward()}a&&e.remove(a),c&&(e.remove(c),u=c.start.row,h=-r.start.length)}else h=r.start.length,u=n.start.row,e.insert(n.end,r.end),e.insert(n.start,r.start);l.start.row==u&&(l.start.column+=h),l.end.row==u&&(l.end.column+=h),e.selection.fromOrientedRange(l)}},indent:function(t){return t.match(/^\s*/)[0]},getNextLineIndent:function(t,e){return e.match(/^\s*/)[0]}}),xe=function(t,e){return new be(t,e)},Oe=function(t){return{getTokenizer:function(){return t},transformAction:function(){},toggleCommentLines:function(e,n,s,r){return t.tCL(e,n,s,r)},toggleBlockComment:function(e,n,s,r){return t.tBC(e,n,s,r)},getNextLineIndent:function(e,n,s){return t.getNextLineIndent(e,n,s)},checkOutdent:function(){return!1},autoOutdent:function(){},getKeywords:function(){var e=t.Keywords;return e?e.map(function(t){var e=t.word,n=t.meta;return{name:e,value:e,score:1e3,meta:n}}):[]},getCompletions:function(e,n,s,r){var i=t.Keywords;if(!i)return[];var o=r.length;return i.map(function(t){var e=t.word,n=t.meta,s=e.length,i=s>=o&&r==e.substr(0,o);return{name:e,value:e,score:i?1e3-s:0,meta:n}})}}},Le=function(t,e){var r={DEFAULT:e||n,ERROR:s};return t=Re(t),Oe(xe(t,r))};n="text",s="invalid";var Pe={VERSION:"0.5",extend:V,parse:Re,getMode:Le};return Pe});