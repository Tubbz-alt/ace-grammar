/**
*
*   AceGrammar
*   @version: 0.6
*
*   Transform a grammar specification in JSON format, into an ACE syntax-highlight parser mode
*   https://github.com/foo123/ace-grammar
*
**/!function(t,e,n,r,i){var o="undefined"!=typeof global&&"[object global]"=={}.toString.call(global)?1:0,s=o||"undefined"==typeof navigator?0:1,l="function"==typeof importScripts&&navigator instanceof WorkerNavigator?1:0,u=Array,a=u.prototype,c=function(){var t=null;if(o)return t=__filename,{path:__dirname,file:__filename};if(l)t=self.location.href;else if(s){var e;(e=document.getElementsByTagName("script"))&&e.length&&(t=e[e.length-1].src)}return t?{path:t.split("/").slice(0,-1).join("/"),file:t}:{path:null,file:null}},f=c(),h=function(t,e){if(o)return e;if("."==e.charAt(0)){t=t.split("/"),e=e.split("/");var n,r=0,i=0,s=e.length,l=t.length;for(n=0;s>n;n++)if(/^\.\./.test(e[n]))r++,i++;else{if(!/^\./.test(e[n]))break;i++}r=r>=l?0:l-r,e=t.slice(0,r).concat(e.slice(i)).join("/")}return e};n=n?[].concat(n):[];var p,g,d,v=n.length,m=new u(v),k=new u(v),y=new u(v),R=new u(v);for(p=0;v>p;p++)m[p]=n[p][0],k[p]=n[p][1],y[p]=/\.js$/i.test(k[p])?h(f.path,k[p]):h(f.path,k[p]+".js");if("object"==typeof module&&module.exports){if(i===module.exports[e]){for(p=0;v>p;p++)R[p]=module.exports[m[p]]||require(y[p])[m[p]];g=r.apply(t,R),module.exports[e]=g||1}}else if("function"==typeof define&&define.amd)define(["exports"].concat(k),function(n){if(i===n[e]){for(var o=a.slice.call(arguments,1),s=o.length,l=0;s>l;l++)R[l]=n[m[l]]||o[l];g=r.apply(t,R),n[e]=g||1}});else if(l){for(p=0;v>p;p++)self[m[p]]||importScripts(y[p]),R[p]=self[m[p]];g=r.apply(t,R),self[e]=g||1}else if(i===t[e]){var w=function(t,e){d=d||document.getElementsByTagName("head")[0];var n=0,r=document.createElement("script");r.type="text/javascript",r.language="javascript",r.src=t,r.onload=r.onreadystatechange=function(){n||r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(n=1,r.onload=r.onreadystatechange=null,d.removeChild(r),r=null,e&&e())},d.appendChild(r)},E=function(e,n,r){t[e]?r():w(n,r)},b=function(n){return function(){v>n&&(R[n]=t[m[n]]),++n<v?E(m[n],y[n],b(n)):(g=r.apply(t,R),t[e]=g||1)}};v?E(m[0],y[0],b(0)):(g=r.apply(t,R),t[e]=g||1)}}(this,"AceGrammar",[["Classy","./classy"],["RegExAnalyzer","./regexanalyzer"]],function(t,e){var n,r,o=1/0,s=2,u=4,a=8,c=9,f=10,h=16,p=32,g=64,d=128,v=256,m=512,k=2,y=4,R=8,w=4,E=8,b=16,C=17,x=18,_=32,L=33,B=34,S=64,O=128,T=256,q=257,A=258,j=259,I=512,N=1024,$={ONEOF:S,EITHER:S,ALL:O,ZEROORONE:q,ZEROORMORE:A,ONEORMORE:j,REPEATED:T},K={BLOCK:_,COMMENT:B,ESCAPEDBLOCK:L,SIMPLE:b,GROUP:I,NGRAM:N},M=t.Class,D=Array.prototype,P=Object.prototype,z=D.slice,F=(D.splice,D.concat),U=P.hasOwnProperty,G=P.toString,W=P.propertyIsEnumerable,Z=Object.keys,H=function(t){var e=typeof t,n=G.call(t);return"undefined"==e?v:"number"==e||t instanceof Number?s:null===t?d:!0===t||!1===t?u:t&&("string"==e||t instanceof String)?1==t.length?c:a:t&&("[object RegExp]"==n||t instanceof RegExp)?h:t&&("[object Array]"==n||t instanceof Array)?p:t&&"[object Object]"==n?g:m},V=function(t,e){return e||p!=H(t)?[t]:t},J=function(t,e){return t=V(t,e),(e||p!=H(t[0]))&&(t=[t]),t},Q=function(t){var e,n=H(t);if(!((g|p)&n))return t;var r,i={};for(r in t)U.call(t,r)&&W.call(t,r)&&(e=H(t[r]),i[r]=g&e?Q(t[r]):p&e?t[r].slice():t[r]);return i},X=function(){var t=z.call(arguments),e=t.length;if(1>e)return null;if(2>e)return Q(t[0]);var n,r,i,o,s=t.shift(),l=Q(s);for(e--,r=0;e>r;r++)if(n=t.shift())for(i in n)U.call(n,i)&&W.call(n,i)&&(U.call(s,i)&&W.call(s,i)?(o=H(s[i]),g&~a&o&&(l[i]=X(s[i],n[i]))):l[i]=Q(n[i]));return l},Y=function(t){return t.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},te=function(t,e){var n,r,i,o;for(o=function(t,n){return e[1+parseInt(n,10)]},n=t.split("$$"),i=n.length,r=0;i>r;r++)n[r]=n[r].replace(/\$(\d{1,2})/g,o);return n.join("$")},ee=function(t,e){return e.length-t.length},ne=function(t,e){return a&H(e)&&a&H(t)&&e.length&&e.length<=t.length&&e==t.substr(0,e.length)},re=function(t,n,r){if(!t||s==H(t))return t;var i=n?n.length||0:0;if(i&&n==t.substr(0,i)){var o,l,u,a="^("+t.substr(i)+")";return r[a]||(o=new RegExp(a),u=new e(o).analyze(),l=u.getPeekChars(),Z(l.peek).length||(l.peek=null),Z(l.negativepeek).length||(l.negativepeek=null),r[a]=[o,l]),r[a]}return t},ie=function(t,e){var n={},r="",i=H(e);(a==i||c==i)&&(r=e);var o=t.sort(ee).map(function(t){return n[t.charAt(0)]=1,Y(t)}).join("|");return[new RegExp("^("+o+")"+r),{peek:n,negativepeek:null},1]},oe="undefined"!=typeof global&&"[object global]"=={}.toString.call(global)?1:0,se=oe||"undefined"==typeof navigator?0:1,le="function"==typeof importScripts&&navigator instanceof WorkerNavigator?1:0,ue=function(){var t=null;if(oe)return t=__filename,{path:__dirname,file:__filename};if(le)t=self.location.href;else if(se){var e;(e=document.getElementsByTagName("script"))&&e.length&&(t=e[e.length-1].src)}return t?{path:t.split("/").slice(0,-1).join("/"),file:t}:{path:null,file:null}};ue();var ae=M({constructor:function(t){this.string=t?""+t:"",this.start=this.pos=0,this._=null},_:null,string:"",start:0,pos:0,fromStream:function(t){return this._=t,this.string=""+t.string,this.start=t.start,this.pos=t.pos,this},toString:function(){return this.string},sol:function(){return 0==this.pos},eol:function(){return this.pos>=this.string.length},chr:function(t,e){var n=this.string.charAt(this.pos)||null;return n&&t==n?(!1!==e&&(this.pos+=1,this._&&(this._.pos=this.pos)),n):!1},chl:function(t,e){var n=this.string.charAt(this.pos)||null;return n&&-1<t.indexOf(n)?(!1!==e&&(this.pos+=1,this._&&(this._.pos=this.pos)),n):!1},str:function(t,e,n){var r=this.pos,i=this.string,o=i.charAt(r)||null;if(o&&e[o]){var s=t.length,l=i.substr(r,s);if(t==l)return!1!==n&&(this.pos+=s,this._&&(this._.pos=this.pos)),l}return!1},rex:function(t,e,n,r,i){var o=this.pos,s=this.string,l=s.charAt(o)||null;if(l&&e&&e[l]||n&&!n[l]){var u=s.slice(o).match(t);return!u||u.index>0?!1:(!1!==i&&(this.pos+=u[r||0].length,this._&&(this._.pos=this.pos)),u)}return!1},end:function(){return this.pos=this.string.length,this._&&(this._.pos=this.pos),this},nxt:function(){if(this.pos<this.string.length){var t=this.string.charAt(this.pos++)||null;return this._&&(this._.pos=this.pos),t}},bck:function(t){return this.pos-=t,0>this.pos&&(this.pos=0),this._&&(this._.pos=this.pos),this},bck2:function(t){return this.pos=t,0>this.pos&&(this.pos=0),this._&&(this._.pos=this.pos),this},spc:function(){for(var t=this.pos,e=this.pos,n=this.string;/[\s\u00a0]/.test(n.charAt(e));)++e;return this.pos=e,this._&&(this._.pos=this.pos),this.pos>t},cur:function(){return this.string.slice(this.start,this.pos)},sft:function(){return this.start=this.pos,this}}),ce=M({constructor:function(t){this.l=t||0,this.stack=[],this.t=E,this.r="0",this.inBlock=null,this.endBlock=null},l:0,stack:null,t:null,r:null,inBlock:null,endBlock:null,clone:function(){var t=new this.$class(this.l);return t.t=this.t,t.r=this.r,t.stack=this.stack.slice(),t.inBlock=this.inBlock,t.endBlock=this.endBlock,t},toString:function(){return["",this.l,this.t,this.r,this.inBlock||"0",this.stack.length].join("_")}}),fe=M({constructor:function(t,e,n,r){var i=this;switch(i.type=k,i.tt=t||c,i.tn=e,i.tk=r||0,i.tg=0,i.tp=null,i.p=null,i.np=null,i.tt){case c:case f:i.tp=n;break;case a:i.tp=n,i.p={},i.p[""+n.charAt(0)]=1;break;case h:i.tp=n[0],i.p=n[1].peek||null,i.np=n[1].negativepeek||null,i.tg=n[2]||0;break;case d:i.tp=null}},type:null,tt:null,tn:null,tp:null,tg:0,tk:0,p:null,np:null,get:function(t,e){var n,r=this,i=r.tt,o=r.tk,s=r.tp,l=r.tg,u=r.p,p=r.np;switch(i){case c:if(n=t.chr(s,e))return[o,n];break;case f:if(n=t.chl(s,e))return[o,n];break;case a:if(n=t.str(s,u,e))return[o,n];break;case h:if(n=t.rex(s,u,p,l,e))return[o,n];break;case d:return!1!==e&&t.end(),[o,""]}return!1},toString:function(){return["[","Matcher: ",this.tn,", Pattern: ",this.tp?this.tp.toString():null,"]"].join("")}}),he=M(fe,{constructor:function(t,e,n){var r=this;r.type=y,r.tn=t,r.ms=e,r.ownKey=!1!==n},ms:null,ownKey:!0,get:function(t,e){var n,r,i=this.ms,o=i.length,s=this.ownKey;for(n=0;o>n;n++)if(r=i[n].get(t,e))return s?[n,r[1]]:r;return!1}}),pe=M(fe,{constructor:function(t,e,n){var r=this;r.type=R,r.tn=t,r.s=new he(r.tn+"_Start",e,!1),r.e=n},s:null,e:null,get:function(t,e){var n,r=this,i=r.s,o=r.e;if(n=i.get(t,e)){var l=o[n[0]],u=H(l),c=i.ms[n[0]].tt;return h==c&&(s==u?l=new fe(a,r.tn+"_End",n[1][l+1]):a==u&&(l=new fe(a,r.tn+"_End",te(l,n[1])))),l}return!1}}),ge=function(t,e,n,r){var i=H(e);if(s==i)return e;if(!r[t]){n=n||0;var o,l=0;e&&e.isCharList&&(l=1,delete e.isCharList),o=d&i?new fe(d,t,e,n):c==i?new fe(c,t,e,n):a&i?l?new fe(f,t,e,n):new fe(a,t,e,n):p&i?new fe(h,t,e,n):e,r[t]=o}return r[t]},de=function(t,e,n,r,i,o){if(!o[t]){var s,l,u,f,h,g,d,v=0,m=0,k=1;if(s=V(e),u=s.length,1==u)d=ge(t,re(s[0],n,i),0,o);else if(u>1){for(f=(u>>1)+1,l=0;f>=l;l++)h=H(s[l]),g=H(s[u-1-l]),(c!=h||c!=g)&&(k=0),p&h||p&g?v=1:(ne(s[l],n)||ne(s[u-1-l],n))&&(m=1);if(!k||r&&a&H(r))if(!r||v||m){for(l=0;u>l;l++)s[l]=p&H(s[l])?de(t+"_"+l,s[l],n,r,i,o):ge(t+"_"+l,re(s[l],n,i),l,o);d=u>1?new he(t,s):s[0]}else d=ge(t,ie(s,r),0,o);else s=s.slice().join(""),s.isCharList=1,d=ge(t,s,0,o)}o[t]=d}return o[t]},ve=function(t,e,n,r,i){if(!i[t]){var o,s,l,u,c,f,p;for(u=[],c=[],o=J(e),s=0,l=o.length;l>s;s++)f=ge(t+"_0_"+s,re(o[s][0],n,r),s,i),p=o[s].length>1?h!=f.tt||a!=H(o[s][1])||ne(o[s][1],n)?ge(t+"_1_"+s,re(o[s][1],n,r),s,i):o[s][1]:f,u.push(f),c.push(p);i[t]=new pe(t,u,c)}return i[t]},me=M({constructor:function(t,e,n){var r=this;r.tt=b,r.tn=t,r.t=e,r.r=n,r.required=0,r.ERR=0,r.toClone=["t","r"]},tn:null,tt:null,t:null,r:null,required:0,ERR:0,toClone:null,get:function(t,e){var n=this,r=n.t,i=n.tt;if(C==i){if(t.spc(),t.eol())return e.t=E,n.r}else if(x==i)n.ERR=n.required&&t.spc()&&!t.eol()?1:0,n.required=0;else if(r.get(t))return e.t=n.tt,n.r;return!1},require:function(t){return this.required=t?1:0,this},push:function(t,e,n){return e?t.splice(e,0,n):t.push(n),this},clone:function(){var t,e,n,r=this,i=r.toClone;if(t=new r.$class,t.tt=r.tt,t.tn=r.tn,i&&i.length)for(n=i.length,e=0;n>e;e++)t[i[e]]=r[i[e]];return t},toString:function(){return["[","Tokenizer: ",this.tn,", Matcher: ",this.t?this.t.toString():null,"]"].join("")}}),ke=M(me,{constructor:function(t,e,n,r,i,o,s){var l=this;l.$super("constructor",e,n,r),l.ri="undefined"==typeof i?l.r:i,l.tt=t,l.mline="undefined"==typeof o?1:o,l.esc=s||"\\",l.toClone=["t","r","ri","mline","esc"]},ri:null,mline:0,esc:null,get:function(t,e){var n,r,i,o,s,l,u,a,c,f=this,h=0,p=0,g="",v=f.mline,m=f.t,k=f.tn,y=f.tt,R=f.r,w=f.ri,E=R!=w,b=0,C=L==y,x=f.esc;if(B==y&&(f.required=0),s=0,e.inBlock==k?(p=1,n=e.endBlock,s=1,l=w):!e.inBlock&&(n=m.get(t))&&(p=1,e.inBlock=k,e.endBlock=n,l=R),p){if(i=e.stack.length,o=d==n.tt,E){if(s&&o&&t.sol())return f.required=0,e.inBlock=null,e.endBlock=null,!1;if(!s)return f.push(e.stack,i,f.clone()),e.t=y,l}if(h=n.get(t),r=v,c=0,h)l=o?w:R;else for(a=t.pos;!t.eol();){if(u=t.pos,!(C&&b||!n.get(t))){E?t.pos>u&&u>a?(l=w,t.bck2(u),c=1):(l=R,h=1):(l=R,h=1);break}g=t.nxt(),b=!b&&g==x}return r=v||C&&b,h||!r&&!c?(e.inBlock=null,e.endBlock=null):f.push(e.stack,i,f.clone()),e.t=y,l}return!1}}),ye=M(me,{constructor:function(t,e,n,r){var i=this;i.tt=T,i.tn=t||null,i.t=null,i.ts=null,i.min=n||0,i.max=r||o,i.found=0,i.toClone=["ts","min","max","found"],e&&i.set(e)},ts:null,min:0,max:1,found:0,set:function(t){return t&&(this.ts=V(t)),this},get:function(t,e){var n,r,i,o,s,l=this,u=l.ts,a=u.length,c=l.found,f=l.min,h=l.max,p=0;for(l.ERR=0,l.required=0,o=t.pos,s=e.stack.length,n=0;a>n;n++){if(r=u[n].clone().require(1),i=r.get(t,e),!1!==i){if(++c,h>=c)return l.found=c,l.push(e.stack,s,l.clone()),l.found=0,i;break}r.required&&p++,r.ERR&&t.bck2(o)}return l.required=f>c,l.ERR=c>h||f>c&&p>0,!1}}),Re=M(ye,{constructor:function(t,e){this.$super("constructor",t,e,1,1),this.tt=S},get:function(t,e){var n,r,i,o,s=this,l=s.ts,u=l.length,a=0,c=0;for(s.required=1,s.ERR=0,o=t.pos,i=0;u>i;i++){if(r=l[i].clone(),n=r.get(t,e),a+=r.required?1:0,!1!==n)return n;r.ERR&&(c++,t.bck2(o))}return s.required=a>0,s.ERR=u==c&&a>0,!1}}),we=M(ye,{constructor:function(t,e){this.$super("constructor",t,e,1,1),this.tt=O},get:function(t,e){var n,r,i,o,s=this,l=s.ts,u=l.length;if(s.required=1,s.ERR=0,i=t.pos,o=e.stack.length,n=l[0].clone().require(1),r=n.get(t,e),!1!==r){for(var a=u-1;a>0;a--)s.push(e.stack,o+u-a-1,l[a].clone().require(1));return r}return n.ERR?(s.ERR=1,t.bck2(i)):n.required&&(s.ERR=1),!1}}),Ee=M(ye,{constructor:function(t,e){this.$super("constructor",t,e,1,1),this.tt=N},get:function(t,e){var n,r,i,o,s=this,l=s.ts,u=l.length;if(s.required=0,s.ERR=0,i=t.pos,o=e.stack.length,n=l[0].clone().require(0),r=n.get(t,e),!1!==r){for(var a=u-1;a>0;a--)s.push(e.stack,o+u-a-1,l[a].clone().require(1));return r}return n.ERR&&t.bck2(i),!1}}),be=function(t,e,r,i,s,l,u,c,f,h,g){if(null===t){var d=new me(t,t,n);return d.tt=C,d}if(""===t){var d=new me(t,t,n);return d.tt=x,d}if(t=""+t,!c[t]){var v,m,k,y,R,w,E,d=null;if(v=r[t]||i[t]||{type:"simple",tokens:t}){if((a|p)&H(v)&&(v={type:"simple",tokens:v}),m=v.type?K[v.type.toUpperCase().replace("-","").replace("_","")]:b,b&m&&""===v.tokens)return d=new me(t,"",n),d.tt=x,c[t]=d,d;if(v.tokens=V(v.tokens),y=v.action||null,b&m)v.autocomplete&&xe(v,t,g),k="undefined"==typeof v.combine?"\\b":v.combine,d=new me(t,de(t,v.tokens.slice(),e,k,l,u),s[t]||n),c[t]=d;else if(_&m)B&m&&Ce(v,h),d=new ke(m,t,ve(t,v.tokens.slice(),e,l,u),s[t]||n,s[t+".inside"],v.multiline,v.escape),c[t]=d,v.interleave&&f.push(d.clone());else if(I&m){w=v.tokens.slice(),p&H(v.match)?d=new ye(t,null,v.match[0],v.match[1]):(R=$[v.match.toUpperCase()],d=q==R?new ye(t,null,0,1):A==R?new ye(t,null,0,o):j==R?new ye(t,null,1,o):S&R?new Re(t,null):new we(t,null)),c[t]=d,E=[];for(var L=0,O=w.length;O>L;L++)E=E.concat(be(w[L],e,r,i,s,l,u,c,f,h,g));d.set(E)}else if(N&m){d=J(v.tokens.slice()).slice();for(var T,M=[],L=0,O=d.length;O>L;L++)M[L]=d[L].slice(),d[L]=new Ee(t+"_NGRAM_"+L,null);c[t]=d;for(var L=0,O=d.length;O>L;L++){T=M[L],E=[];for(var D=0,P=T.length;P>D;D++)E=E.concat(be(T[D],e,r,i,s,l,u,c,f,h,g));d[L].set(E)}}}}return c[t]},Ce=function(t,e){var n,r,o,s=J(t.tokens.slice());for(i=0,l=s.length;l>i;i++)n=s[i][0],r=s[i].length>1?s[i][1]:s[i][0],o=s[i].length>2?s[i][2]:"",null===r?(e.line=e.line||[],e.line.push(n)):(e.block=e.block||[],e.block.push([n,r,o]))},xe=function(t,e,n){var r=[].concat(V(t.tokens)).map(function(t){return{word:t,meta:e}});n.autocomplete=F.apply(n.autocomplete||[],r)},_e=function(t){var e,n,r,i,o,s,l,u,a,c,f,h,g,d,v,m;if(t.__parsed)return t;for(f={},h={},g={},v={},m={},d=[],t=Q(t),e=t.RegExpID||null,t.RegExpID=null,delete t.RegExpID,s=t.Lex||{},t.Lex=null,delete t.Lex,l=t.Syntax||{},t.Syntax=null,delete t.Syntax,o=t.Style||{},i=t.Parser||[],r=i.length,n=[],u=0;r>u;u++)a=i[u],c=be(a,e,s,l,o,f,h,g,d,v,m)||null,c&&(p&H(c)?n=n.concat(c):n.push(c));return t.Parser=n,t.cTokens=d,t.Style=o,t.Comments=v,t.Keywords=m,t.__parsed=1,t},Le="undefined"!=typeof ace?ace:{require:function(){return{}}},Be=Le.require,Se=Be("ace/range").Range||Object,Oe=Be("ace/tokenizer").Tokenizer||Object,Te=Be("ace/token_iterator").TokenIterator||Object,qe=M(Oe,{constructor:function(t,e){var n=this;if(n.LC=t.Comments.line||null,n.BC=t.Comments.block?{start:t.Comments.block[0][0],end:t.Comments.block[0][1]}:null,n.LC){if(p&H(n.LC))var r=n.LC.map(Y).join("|");else var r=Y(n.LC);n.rxLine=new RegExp("^(\\s*)(?:"+r+") ?")}n.BC&&(n.rxStart=new RegExp("^(\\s*)(?:"+Y(n.BC.start)+")"),n.rxEnd=new RegExp("(?:"+Y(n.BC.end)+")\\s*$")),n.DEF=e.DEFAULT,n.ERR=t.Style.error||e.ERROR,n.Keywords=t.Keywords.autocomplete||null,n.Tokens=t.Parser||[],n.cTokens=t.cTokens.length?t.cTokens:null},ERR:null,DEF:null,LC:null,BC:null,rxLine:null,rxStart:null,rxEnd:null,Keywords:null,cTokens:null,Tokens:null,parse:function(t){t=t||"";var e,n,r=t.split(/\r\n|\r|\n/g),i=r.length,o=[];for(n={state:new ce,tokens:null},e=0;i>e;e++)n=this.getLineTokens(r[e],n.state,e),o.push(n.tokens);return o},getLineTokens:function(t,e,n){var r,i,o,s,l,u,a,c,f,h,p=this,g=p.cTokens,d=p.Tokens,v=d.length,m=null,k=p.DEF,y=p.ERR;for(u=[],f=new ae(t),e=e?e.clone():new ce,e.l=1+n,h=e.stack,a={type:null,value:""},c=null,h.length&&C==h[h.length-1].tt&&h.pop();!f.eol();)if(i=0,c&&c!==a.type?(a.type&&u.push(a),a={type:c,value:f.cur(),error:m},m=null,f.sft()):a.type&&(a.value+=f.cur(),f.sft()),h.length&&x==h[h.length-1].tt||!f.spc()){for(;h.length&&!f.eol();){if(g){for(s=0,o=0;s<g.length;)if(l=g[s++],e.r=c=l.get(f,e),!1!==c){o=1;break}if(o){i=1;break}}if(l=h.pop(),e.r=c=l.get(f,e),!1!==c){i=1;break}if(l.ERR||l.required){h.length=0,f.nxt(),e.t=w,e.r=c=y,i=1,m=l.tn+" "+(l.required?"is missing":"syntax error");break}}if(!i){if(f.eol())break;for(r=0;v>r;r++){if(l=d[r],e.r=c=l.get(f,e),!1!==c){i=1;break}if(l.ERR||l.required){h.length=0,f.nxt(),e.t=w,e.r=c=y,i=1,m=l.tn+" "+(l.required?"is missing":"syntax error");break}}if(!i){if(f.eol())break;f.nxt(),e.t=E,e.r=c=k}}}else e.t=E,e.r=c=k;return c&&c!==a.type?(a.type&&u.push(a),u.push({type:c,value:f.cur(),error:m}),m=null):a.type&&(a.value+=f.cur(),u.push(a)),a=null,{state:e,tokens:u}},tCL:function(t,e,n,r){function i(t){for(var e=n;r>=e;e++)t(s.getLine(e),e)}var o=this,s=e.doc,l=!0,u=!0,a=1/0,c=e.getTabSize(),f=!1;if(o.LC){var h=p==H(o.LC)?o.LC[0]:o.LC,g=o.rxLine,d=h+" ";f=e.getUseSoftTabs();var v=function(t,e){var n=t.match(g);if(n){var r=n[1].length,i=n[0].length;y(t,r,i)||" "!=n[0][i-1]||i--,s.removeInLine(e,r,i)}},m=function(t,e){(!l||/\S/.test(t))&&(y(t,a,a)?s.insertInLine({row:e,column:a},d):s.insertInLine({row:e,column:a},h))},k=function(t){return g.test(t)},y=function(t,e,n){for(var r=0;e--&&" "==t.charAt(e);)r++;if(0!=r%c)return!1;for(var r=0;" "==t.charAt(n++);)r++;return c>2?r%c!=c-1:0==r%c}}else{if(!o.BC)return!1;var h=o.BC.start,R=o.BC.end,w=o.rxStart,E=o.rxEnd,m=function(t,e){k(t,e)||(!l||/\S/.test(t))&&(s.insertInLine({row:e,column:t.length},R),s.insertInLine({row:e,column:a},h))},v=function(t,e){var n;(n=t.match(E))&&s.removeInLine(e,t.length-n[0].length,t.length),(n=t.match(w))&&s.removeInLine(e,n[1].length,n[0].length)},k=function(t,n){if(w.test(t))return!0;for(var r=e.getTokens(n),i=0;i<r.length;i++)if("comment"===r[i].type)return!0}}var b=1/0;i(function(t,e){var n=t.search(/\S/);-1!==n?(a>n&&(a=n),u&&!k(t,e)&&(u=!1)):b>t.length&&(b=t.length)}),1/0==a&&(a=b,l=!1,u=!1),f&&0!=a%c&&(a=Math.floor(a/c)*c),i(u?v:m)},tBC:function(t,e,n,r){var i=this,o=i.BC;if(o){var s=new Te(e,r.row,r.column),l=s.getCurrentToken();e.selection;var u,a,c=e.selection.toOrientedRange();if(l&&/comment/.test(l.type)){for(var f,h;l&&/comment/.test(l.type);){var p=l.value.indexOf(o.start);if(-1!=p){var g=s.getCurrentTokenRow(),d=s.getCurrentTokenColumn()+p;f=new Se(g,d,g,d+o.start.length);break}l=s.stepBackward()}for(var s=new Te(e,r.row,r.column),l=s.getCurrentToken();l&&/comment/.test(l.type);){var p=l.value.indexOf(o.end);if(-1!=p){var g=s.getCurrentTokenRow(),d=s.getCurrentTokenColumn()+p;h=new Se(g,d,g,d+o.end.length);break}l=s.stepForward()}h&&e.remove(h),f&&(e.remove(f),u=f.start.row,a=-o.start.length)}else a=o.start.length,u=n.start.row,e.insert(n.end,o.end),e.insert(n.start,o.start);c.start.row==u&&(c.start.column+=a),c.end.row==u&&(c.end.column+=a),e.selection.fromOrientedRange(c)}},indent:function(t){return t.match(/^\s*/)[0]},getNextLineIndent:function(t,e){return e.match(/^\s*/)[0]}}),Ae=function(t,e){return new qe(t,e)},je=function(t){var e;return e={getTokenizer:function(){return t},supportAnnotations:!1,createWorker:function(){return null},transformAction:function(){},toggleCommentLines:function(e,n,r,i){return t.tCL(e,n,r,i)},toggleBlockComment:function(e,n,r,i){return t.tBC(e,n,r,i)},getNextLineIndent:function(e,n,r){return t.getNextLineIndent(e,n,r)},checkOutdent:function(){return!1},autoOutdent:function(){},getKeywords:function(){var e=t.Keywords;return e?e.map(function(t){var e=t.word,n=t.meta;return{name:e,value:e,score:1e3,meta:n}}):[]},getCompletions:function(e,n,r,i){var o=t.Keywords;if(!o)return[];var s=i.length;return o.map(function(t){var e=t.word,n=t.meta,r=e.length,o=r>=s&&i==e.substr(0,s);return{name:e,value:e,score:o?1e3-r:0,meta:n}})}}},Ie=function(t,e){var i={DEFAULT:e||n,ERROR:r};t=Q(t);var o=_e(t);return je(Ae(o,i),t)};n="text",r="invalid";var Ne=le?AceWorker:{VERSION:"0.6",extend:X,parse:_e,getMode:Ie};return Ne});